JS API

Есть изображение сердечка, нажав на которое можно лайкнуть определенную статью.
 На сервер отправляется AJAX запрос, который обновляет в БД кол-во лйков статьи. И это АПИ должно возваащать в ответ новое кол-во лайков.

В базовом шаблоне есть блок с подключенными js скриптами. например там подключение jQuery.
        {% block javascripts %}
            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
            <script>
                $('.dropdown-toggle').dropdown();
            </script>
        {% endblock %}


Будем использовать jQuery в нашем коде.
Создадим каталог и в нем файл       public/js/article_show.js
               $(document).ready(function() {
                   $('.js-like-article').on('click', function(e) {
                       e.preventDefault();

                       var $link = $(e.currentTarget);
                       $link.toggleClass('fa-heart-o').toggleClass('fa-heart');

                       $('.js-like-article-count').html('TEST');
                   });
               });


В этом JS мы используем пока что не существующие классы, давайте добавим их. А также мы хотим подключить этот JS файл только в шаблон, twig где вывод статей
        Идем в шаблон         show.html.twig
                {% block javascripts %}
                    {{ parent() }}

                    <script src="{{ asset('js/article_show.js') }}"></script>
                {% endblock %}

Блок      {{ parent() }}  используется чтобы подтянуть код указанный в    base.html.twig


Пока что при нажатии на  сердце будет выводиться   Test  . но далее поправим.










