Environment Variables

Проблема
  - хранить  пароль от БД,
  - использовать секретные URL для Slack,
  - использовать на продакшене другие переменные.


*** Intro to Environment Variables ***
Переменные окружения - рекомендованный Symfony способ.
 Это переменные, которые установлены в окружении операционной системы, и затем они могут быть прочитаны с помощью кода.
  Как правило с помощью  getenv() или  $_SERVER  .

В   Symfony  переменные окружения используются из коробки, так фрагмент файла       /config/bootstrap.php
            <?php

            use Symfony\Component\Dotenv\Dotenv;

            require dirname(__DIR__).'/vendor/autoload.php';

            if (!array_key_exists('APP_ENV', $_SERVER)) {
                $_SERVER['APP_ENV'] = $_ENV['APP_ENV'] ?? null;
            }

            if ('prod' !== $_SERVER['APP_ENV']) {
                if (!class_exists(Dotenv::class)) {
                    throw new RuntimeException('The "APP_ENV" environment variable is not set to "prod". Please run "composer require symfony/dotenv" to load the ".env" files configuring the application.');
                }

                $path = dirname(__DIR__).'/.env';
                $dotenv = new Dotenv();

 Принято переменные среды указываем в верхнем регистре.


 Из файла  в корне проекта   .env    считываются ключи и  устанавливаются как новые переменные.
 Например вот так
                ### CUSTOM VARS
                SLACK_WEBHOOK_ENDPOINT=https://hooks.slack.com/services/T0A4.......
                ### END CUSTOM VARS



***  Seeing all Environment Variables  ***
 Для просмотра всех имеющихся переменных сред
                                 php bin/console about

.env       на прод
.env.dist      коммитим как пример
.env.local        девелоп когда нужно какие-то специфические переменные переопределить для локал разработки.




