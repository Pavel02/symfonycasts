Fetching Relations

На данный момент в БД уже для каждой статьи есть по 2 комментария.

В классе   /src/Controller/ArticleController.php  в методе show()
 можем получить все комментарии к статье
                        $comments = $commentRepository->findBy(['article' => $article]);
                        dd($comments);
   Вернется массив с объектами   Comment.


*** Fetching Comments Directly from Article ***
  Есть другой путь. Когда мы создавали связи для Comment, при настройке нас спрашивали,
    хотим ли мы создать в Article создать поле Comment.
                        $comments = $article->getComments();
                        dump($comments);die;


*** Lazy Loading ***
  В результате работы dd($comments);  нам вернется
            ArticleController.php on line 55:
            PersistentCollection {#569 ▼
              -snapshot: []
              -owner: Article {#558 ▶}
              -association: array:15 [ …15]
              -em: EntityManager {#455 …11}
              -backRefFieldName: "article"
              -typeClass: ClassMetadata {#560 …}
              -isDirty: false
              #collection: ArrayCollection {#574 ▶}
              #initialized: false
            }

  Ленивая загрузка - связанные данные не запрашиваются до тех пор, пока мы не используем их.
   Чтобы сделать этот процесс Doctrine использует объект  PersistentCollection.
    Этот объект выглядит и ведет себя как массив.
                            $comments = $article->getComments();
                            foreach ($comments as $comment) {
                                dump($comment);
                            }
   Если раньше, комменты были жестко захардкодены в коде и передавались в шаблон
                            $html = $this->render('article/show.html.twig', [
                                'article' => $article,
                                'comments' => $comments,
                            ]);

    то теперь нам достаточно передавать только $article
                                                 $html = $this->render('article/show.html.twig', [
                                                    'article' => $article,
                                                ]);
    И в самом шаблоне   /src/templates/article/show.html.twig
                <h3><i class="pr-3 fa fa-comment"></i>{{ article.comments|length }} Comments</h3>

